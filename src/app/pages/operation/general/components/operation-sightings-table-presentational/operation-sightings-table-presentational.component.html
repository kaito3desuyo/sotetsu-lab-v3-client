<section class="operation-sighting-table mat-elevation-z1">
  <table mat-table matSort [dataSource]="dataSource">
    <!-- Position Column -->
    <ng-container matColumnDef="operationNumber">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header="rotatedOperationNumber"
      >
        運用番号
      </th>
      <td mat-cell *matCellDef="let element">
        <div
          class="operation-number-circle"
          [ngStyle]="{
            background: getOperationNumberColor(element.rotatedOperationNumber)
          }"
        >
          <ng-container *ngIf="element.rotatedOperationNumber === null">
            <div fxLayout="row" fxLayoutAlign="center center">
              不明
            </div>
          </ng-container>
          <ng-container *ngIf="element.rotatedOperationNumber !== null">
            <ng-container *ngIf="element.rotatedOperationNumber === '100'">
              <div fxLayout="row" fxLayoutAlign="center center">
                休車
              </div>
            </ng-container>
            <ng-container *ngIf="element.rotatedOperationNumber !== '100'">
              <a routerLink="/" fxLayout="row" fxLayoutAlign="center center">
                {{ element.rotatedOperationNumber }}
                {{
                  mode === "formation" &&
                  element.postedOperationNumber !==
                    element.rotatedOperationNumber
                    ? "?"
                    : ""
                }}
              </a>
            </ng-container>
          </ng-container>
        </div>
      </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="formationNumber">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="formationNumber">
        編成番号
      </th>
      <td mat-cell *matCellDef="let element">
        <ng-container *ngIf="element.formationNumber === null">
          不明
        </ng-container>
        <ng-container *ngIf="element.formationNumber !== null">
          {{ element.formationNumber }}
          {{
            mode === "operation" &&
            element.postedOperationNumber !== element.rotatedOperationNumber
              ? "?"
              : ""
          }}
        </ng-container>
      </td>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="sightingTime">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="sightingTime">
        目撃時刻
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.sightingTime | date: "yyyy-MM-dd HH:mm:ss" }}
      </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="updatedAt">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="updatedAt">
        最終更新時刻
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.updatedAt | date: "yyyy-MM-dd HH:mm:ss" }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</section>
